<!DOCTYPE html>


































































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<title>Taking Photos Simply | Android Developers</title>
<link href="../../assets/android-developer-docs-devguide.css" rel="stylesheet" type="text/css" />
<script src="../../assets/search_autocomplete.js" type="text/javascript"></script>
<script src="../../assets/jquery-resizable.min.js" type="text/javascript"></script>
<script src="../../assets/android-developer-docs.js" type="text/javascript"></script>
<script src="../../assets/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
  setToRoot("../../");
</script>
<script src="../../resources/resources-data.js" type="text/javascript"></script>
<noscript>
  <style type="text/css">
    html,body{overflow:auto;}
    #body-content{position:relative; top:0;}
    #doc-content{overflow:visible;border-left:3px solid #666;}
    #side-nav{padding:0;}
    #side-nav .toggle-list ul {display:block;}
    #resize-packages-nav{border-bottom:3px solid #666;}
  </style>
</noscript>
</head>
<body class="gc-documentation" itemscope itemtype="http://schema.org/Article">

  <div id="header">
      <div id="headerLeft">
          <a href="../../index.html" tabindex="-1"><img
              src="../../assets/images/bg_logo.png" alt="Android Developers" /></a>
          <ul id="header-tabs" class="resources">
    
	<li id="home-link"><a href="../../offline.html">
	
		<span class="en">Home</span>
		<span style="display:none" class="de">Startseite</span>
		<span style="display:none" class="es"></span>
		<span style="display:none" class="fr"></span>
		<span style="display:none" class="it"></span>
		<span style="display:none" class="ja">ホーム</span>
		<span style="display:none" class="zh-CN">主页</span>
		<span style="display:none" class="zh-TW">首頁</span>
	
	</a></li>
	<li id="sdk-link"><a href="../../sdk/index.html">
		<span class="en">SDK</span>
	</a></li>
	<li id="guide-link"><a href="../../guide/index.html" onClick="return loadLast('guide')">
	
		<span class="en">Dev Guide</span>
		<span style="display:none" class="de">Handbuch</span>
		<span style="display:none" class="es">Guía</span>
		<span style="display:none" class="fr">Guide</span>
		<span style="display:none" class="it">Guida</span>
		<span style="display:none" class="ja">開発ガイド</span>
		<span style="display:none" class="zh-CN">开发人员指南</span>
		<span style="display:none" class="zh-TW">開發指南</span>
	
	</a></li>
	<li id="reference-link"><a href="../../reference/packages.html" onClick="return loadLast('reference')">
	
		<span class="en">Reference</span>
		<span style="display:none" class="de">Referenz</span>
		<span style="display:none" class="es">Referencia</span>
		<span style="display:none" class="fr">Référence</span>
		<span style="display:none" class="it">Riferimento</span>
		<span style="display:none" class="ja">リファレンス</span>
		<span style="display:none" class="zh-CN">参考</span>
		<span style="display:none" class="zh-TW">參考資料</span>
	
	</a></li>
	<li id="resources-link"><a href="../../resources/index.html" onClick="return loadLast('resources')">
	
		<span class="en">Resources</span>
		<span style="display:none" class="de"></span>
		<span style="display:none" class="es"></span>
		<span style="display:none" class="fr"></span>
		<span style="display:none" class="it"></span>
    		<span style="display:none" class="ja"></span>
		<span style="display:none" class="zh-CN"></span>
		<span style="display:none" class="zh-TW"></span>
	
	</a></li>
	<li id="videos-link"><a href="../../videos/index.html" onClick="return loadLast('videos')">
	
		<span class="en">Videos</span>
		<span style="display:none" class="de"></span>
		<span style="display:none" class="es"></span>
		<span style="display:none" class="fr"></span>
		<span style="display:none" class="it"></span>
		<span style="display:none" class="ja">ビデオ</span>
		<span style="display:none" class="zh-CN"></span>
		<span style="display:none" class="zh-TW"></span>
	
	</a></li>
	<li><a href="http://android-developers.blogspot.com" onClick="return requestAppendHL(this.href)">
	
		<span class="en">Blog</span>
		<span style="display:none" class="de"></span>
		<span style="display:none" class="es"></span>
		<span style="display:none" class="fr"></span>
		<span style="display:none" class="it"></span>
		<span style="display:none" class="ja">ブログ</span>
		<span style="display:none" class="zh-CN">博客</span>
		<span style="display:none" class="zh-TW">網誌</span>
	
	</a></li>


     
</ul>
     
      </div>
      <div id="headerRight">
          <div id="headerLinks">
          &nbsp;&nbsp;
          <a href="../../design/index.html">Android Design</a>&nbsp;&nbsp;
          <a href="http://www.android.com">Android.com</a>
          </div>
  <div id="search" >
      <div id="searchForm">
          <form accept-charset="utf-8" class="gsc-search-box" 
                onsubmit="return submit_search()">
            <table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody>
                <tr>
                  <td class="gsc-input">
                    <input id="search_autocomplete" class="gsc-input" type="text" size="33" autocomplete="off"
                      title="search developer docs" name="q"
                      value="search developer docs"
                      onFocus="search_focus_changed(this, true)"
                      onBlur="search_focus_changed(this, false)"
                      onkeydown="return search_changed(event, true, '../../')"
                      onkeyup="return search_changed(event, false, '../../')" />
                  <div id="search_filtered_div" class="no-display">
                      <table id="search_filtered" cellspacing=0>
                      </table>
                  </div>
                  </td>
                  <td class="gsc-search-button">
                    <input type="submit" value="Search" title="search" id="search-button" class="gsc-search-button" />
                  </td>
                  <td class="gsc-clear-button">
                    <div title="clear results" class="gsc-clear-button">&nbsp;</div>
                  </td>
                </tr></tbody>
              </table>
          </form>
      </div><!-- searchForm -->
  </div><!-- search -->
      </div><!-- headerRight -->
      <script type="text/javascript">
        <!--  
        changeTabLang(getLangPref());
        //-->
      </script>
  </div><!-- header -->

  <div class="g-section g-tpl-200" id="body-content">
    <div class="g-unit g-first" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      <div id="devdoc-nav"><ul>
  <li>
    <span class="heading">
      <span class="en">Android Training</span>
    </span>
    <ul>
      
      <li><a href="../../training/index.html">
            <span class="en">Orientation</span>
          </a>
      </li>

      <li class="toggle-list">
        <div><a href="../../training/multiscreen/index.html">
            <span class="en">Designing for Multiple Screens</span>
          </a></div>
        <ul>
          <li><a href="../../training/multiscreen/screensizes.html">
            <span class="en">Supporting Different Screen Sizes</span>
          </a>
          </li>
          <li><a href="../../training/multiscreen/screendensities.html">
            <span class="en">Supporting Different Screen Densities</span>
          </a>
          </li>
          <li><a href="../../training/multiscreen/adaptui.html">
            <span class="en">Implementing Adaptive UI Flows</span>
          </a>
          </li>
        </ul>
      </li>
      
      <li class="toggle-list">
        <div><a href="../../training/improving-layouts/index.html">
            <span class="en">Improving Layout Performance</span>
          </a></div>
        <ul>
          <li><a href="../../training/improving-layouts/optimizing-layout.html">
            <span class="en">Optimizing Layout Hierarchies</span>
          </a>
          </li>
          <li><a href="../../training/improving-layouts/reusing-layouts.html">
            <span class="en">Re-using Layouts with &lt;include/&gt;</span>
          </a>
          </li>
          <li><a href="../../training/improving-layouts/loading-ondemand.html">
            <span class="en">Loading Views On Demand</span>
          </a>
          </li>
          <li><a href="../../training/improving-layouts/smooth-scrolling.html">
            <span class="en">Making ListView Scrolling Smooth</span>
          </a>
          </li>
        </ul>
      </li>
      
      <li class="toggle-list">
        <div><a href="../../training/managing-audio/index.html">
            <span class="en">Managing Audio Playback</span>
          </a></div>
        <ul>
          <li><a href="../../training/managing-audio/volume-playback.html">
            <span class="en">Controlling Your App’s Volume and Playback</span>
          </a>
          </li>
          <li><a href="../../training/managing-audio/audio-focus.html">
            <span class="en">Managing Audio Focus</span>
          </a>
          </li>
          <li><a href="../../training/managing-audio/audio-output.html">
            <span class="en">Dealing with Audio Output Hardware</span>
          </a>
          </li>
        </ul>
      </li>
      
      <li class="toggle-list">
        <div><a href="../../training/monitoring-device-state/index.html">
            <span class="en">Optimizing Battery Life</span>
          </a></div>
        <ul>
          <li><a href="../../training/monitoring-device-state/battery-monitoring.html">
            <span class="en">Monitoring the Battery Level and Charging State</span>
          </a>
          </li>
          <li><a href="../../training/monitoring-device-state/docking-monitoring.html">
            <span class="en">Determining and Monitoring the Docking State and Type</span>
          </a>
          </li>
          <li><a href="../../training/monitoring-device-state/connectivity-monitoring.html">
            <span class="en">Determining and Monitoring the Connectivity Status</span>
          </a>
          </li>
          <li><a href="../../training/monitoring-device-state/manifest-receivers.html">
            <span class="en">Manipulating Broadcast Receivers On Demand</span>
          </a>
          </li>
        </ul>
      </li>

      <li class="toggle-list">
        <div><a href="../../training/search/index.html">
            <span class="en">Adding Search Functionality</span>
          </a> <span class="new">new!</span>
        </div>
        <ul>
          <li><a href="../../training/search/setup.html">
            <span class="en">Setting up the Search Interface</span>
          </a>
          </li>
          <li><a href="../../training/search/search.html">
            <span class="en">Storing and Searching for Data</span>
          </a>
          </li>
          <li><a href="../../training/search/backward-compat.html">
            <span class="en">Remaining Backward Compatible</span>
          </a>
          </li>
        </ul>
      </li>

      <li class="toggle-list">
        <div><a href="../../training/id-auth/index.html">
            <span class="en">Remembering Users</span>
          </a></div>
        <ul>
          <li><a href="../../training/id-auth/identify.html">
            <span class="en">Remembering Your User</span>
          </a>
          </li>
          <li><a href="../../training/id-auth/authenticate.html">
            <span class="en">Authenticating to OAuth2 Services</span>
          </a>
          </li>
          <li><a href="../../training/id-auth/custom_auth.html">
            <span class="en">Creating a Custom Account Type</span>
          </a>
          </li>
        </ul>
      </li>

      <li class="toggle-list">
        <div><a href="../../training/sharing/index.html">
            <span class="en">Sharing Content</span>
          </a></div>
        <ul>
          <li><a href="../../training/sharing/send.html">
            <span class="en">Sending Content to Other Apps</span>
          </a>
          </li>
          <li><a href="../../training/sharing/receive.html">
            <span class="en">Receiving Content from Other Apps</span>
          </a>
          </li>
          <li><a href="../../training/sharing/shareaction.html">
            <span class="en">Adding an Easy Share Action</span>
          </a>
          </li>
        </ul>
      </li>
      
      <li class="toggle-list">
        <div><a href="../../training/camera/index.html">
            <span class="en">Capturing Photos</span>
          </a></div>
        <ul>
          <li><a href="../../training/camera/photobasics.html">
            <span class="en">Taking Photos Simply</span>
          </a>
          </li>
          <li><a href="../../training/camera/videobasics.html">
            <span class="en">Recording Videos Simply</span>
          </a>
          </li>
          <li><a href="../../training/camera/cameradirect.html">
            <span class="en">Controlling the Camera</span>
          </a>
          </li>
        </ul>
      </li>
      
      <li class="toggle-list">
        <div><a href="../../training/multiple-apks/index.html">
            <span class="en">Maintaining Multiple APKs</span>
          </a></div>
        <ul>
          <li><a href="../../training/multiple-apks/api.html">
            <span class="en">Creating Multiple APKs for Different API Levels</span>
          </a>
          </li>
          <li><a href="../../training/multiple-apks/screensize.html">
            <span class="en">Creating Multiple APKs for Different Screen Sizes</span>
          </a>
          </li>
          <li><a href="../../training/multiple-apks/texture.html">
            <span class="en">Creating Multiple APKs for Different GL Textures</span>
          </a>
          </li>
          <li><a href="../../training/multiple-apks/multiple.html">
            <span class="en">Creating Multiple APKs with 2+ Dimensions</span>
          </a>
          </li>
        </ul>
      </li>
      
      <li class="toggle-list">
        <div><a href="../../training/enterprise/index.html">
            <span class="en">Developing for Enterprise</span>
          </a></div>
        <ul>
          <li><a href="../../training/enterprise/device-management-policy.html">
            <span class="en">Enhancing Security with Device Management Policies</span>
          </a>
          </li>
        </ul>
      </li>
      
      <li class="toggle-list">
        <div><a href="../../training/monetization/index.html">
            <span class="en">Monetizing Your App</span>
          </a></div>
        <ul>
          <li><a href="../../training/monetization/ads-and-ux.html">
            <span class="en">Advertising without Compromising User Experience</span>
          </a>
          </li>
        </ul>
      </li>
      
      <li class="toggle-list">
        <div><a href="../../training/design-navigation/index.html">
            <span class="en">Designing Effective Navigation</span>
          </a></div>
        <ul>
          <li><a href="../../training/design-navigation/screen-planning.html">
            <span class="en">Planning Screens and Their Relationships</span>
          </a>
          </li>
          <li><a href="../../training/design-navigation/multiple-sizes.html">
            <span class="en">Planning for Multiple Touchscreen Sizes</span>
          </a>
          </li>
          <li><a href="../../training/design-navigation/descendant-lateral.html">
            <span class="en">Providing Descendant and Lateral Navigation</span>
          </a>
          </li>
          <li><a href="../../training/design-navigation/ancestral-temporal.html">
            <span class="en">Providing Ancestral and Temporal Navigation</span>
          </a>
          </li>
          <li><a href="../../training/design-navigation/wireframing.html">
            <span class="en">Putting it All Together: Wireframing the Example App</span>
          </a>
          </li>
        </ul>
      </li>
    </ul>
  </li>    
      
      
  <li>
    <span class="heading">
      <span class="en">Technical Resources</span>
    </span>
    <ul>
      <li class="toggle-list">
        <div><a href="../../resources/browser.html?tag=sample">
            <span class="en">Sample Code</span>
            <span class="de" style="display:none">Beispielcode</span>
            <span class="es" style="display:none">Código de ejemplo</span>
            <span class="fr" style="display:none">Exemple de code</span>
            <span class="it" style="display:none">Codice di esempio</span>
            <span class="ja" style="display:none">サンプル コード</span>
            <span class="zh-CN" style="display:none"></span>
            <span class="zh-TW" style="display:none"></span>
          </a></div>
        <ul id="devdoc-nav-sample-list">
          <li><a href="../../resources/samples/get.html">
                <span class="en">Getting the Samples</span>
              </a></li>
        </ul>
      </li>
      <li class="toggle-list">
        <div><a href="../../resources/browser.html?tag=article">
               <span class="en">Articles</span>
             </a></div>
        <ul id="devdoc-nav-article-list">
        </ul>
      </li>
      <li class="toggle-list">
        <div><a href="../../resources/browser.html?tag=tutorial">
               <span class="en">Tutorials</span>
               <span class="de" style="display:none">Lernprogramme</span>
               <span class="es" style="display:none">Tutoriales</span>
               <span class="fr" style="display:none">Didacticiels</span>
               <span class="it" style="display:none">Esercitazioni</span>
               <span class="ja" style="display:none">チュートリアル</span>
               <span class="zh-CN" style="display:none"></span>
               <span class="zh-TW" style="display:none"></span>
             </a></div>
        <ul id="devdoc-nav-tutorial-list">
        </ul>
      </li>
      <li class="toggle-list">
        <div><a href="../../resources/topics.html">
               <span class="en">Topics</span>
             </a></div>
        <ul id="devdoc-nav-topic-list">
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <span class="heading">
      <span class="en">Community</span>
      <span style="display:none" class="de"></span>
      <span style="display:none" class="es">Comunidad</span>
      <span style="display:none" class="fr">Communauté</span>
      <span style="display:none" class="it"></span>
      <span style="display:none" class="ja">コミュニティ</span>
      <span style="display:none" class="zh-CN">社区</span>
      <span style="display:none" class="zh-TW">社群</span>
    </span>
    <ul>
      <li><a href="../../resources/community-groups.html">
            <span class="en">Developer Forums</span>
          </a></li>
      <li><a href="../../resources/community-more.html">
            <span class="en">IRC, G+, Twitter</span>
          </a></li>
    </ul>
  </li>


  <li>
    <span class="heading">
      <span class="en">More</span>
    </span>
    <ul>
      <li><a href="../../resources/faq/commontasks.html">
            <span class="en">Common Tasks </span>
          </a></li>
      <li><a href="../../resources/faq/troubleshooting.html">
            <span class="en">Troubleshooting Tips</span>
          </a></li>
      <li class="toggle-list">
        <div><a href="../../resources/faq/index.html">
               <span class="en">FAQs</span>
             </a></div>
        <ul>
        <li><a href="../../resources/faq/framework.html">
                <span class="en">App Framework FAQ</span>
                </a></li>
        <li><a href="../../resources/faq/licensingandoss.html">
                <span class="en">Licensing FAQ</span>
                </a></li>
        <li><a href="../../resources/faq/security.html">
                <span class="en">Security FAQ</span>
                </a></li>
        </ul>
     </li>
    </ul>
  </li>
</ul>

<script type="text/javascript">
<!--
    buildToggleLists();
    changeNavLang(getLangPref());
//-->
</script>

      </div>
    </div> <!-- end side-nav -->
    <script>
      addLoadEvent(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>




<div class="g-unit" id="doc-content"><a name="top"></a>

<div id="jd-header" class="guide-header">
  <span class="crumb" itemprop="breadcrumb">
    
      <a href="index.html">Capturing Photos</a>:
    
  </span>
<h1 itemprop="name">Taking Photos Simply</h1>
</div>

  
  <div id="jd-content">
 
    
    <div class="training-nav-top">

      
        

        <div class="training-nav-button-next">
          <a href="videobasics.html">
            Next lesson
            <span style="font-size:1.2em">&rsaquo;</span>
            <span class="training-nav-button-title">Recording Videos Simply</span>
          </a>
        </div>
        

      

      

    </div><!-- end training-nav-top -->
    


    <div class="jd-descr" itemprop="articleBody">
    <div id="tb-wrapper">
  <div id="tb">

    <h2>This lesson teaches you to</h2>
    <ol>
      <li><a href="#TaskManifest">Request Camera Permission</a></li>
      <li><a href="#TaskCaptureIntent">Take a Photo with the Camera App</a></li>
      <li><a href="#TaskPhotoView">View the Photo</a></li>
      <li><a href="#TaskPath">Save the Photo</a></li>
      <li><a href="#TaskGallery">Add the Photo to a Gallery</a></li>
      <li><a href="#TaskScalePhoto">Decode a Scaled Image</a></li>
    </ol>

    <h2>You should also read</h2>
    <ul>
      <li><a href="../../guide/topics/media/camera.html">Camera</a></li>
      <li><a href="../../guide/topics/intents/intents-filters.html">Intents and Intent 
      Filters</a></li>
    </ul>

    <h2>Try it out</h2>
    <div class="download-box">
      <a href="http://developer.android.com/shareables/training/PhotoIntentActivity.zip"
class="button">Download the
sample</a>
      <p class="filename">PhotoIntentActivity.zip</p>
    </div>

  </div>
</div>

<p>This lesson explains how to capture photos using an existing camera
application.</p>

<p>Suppose you are implementing a crowd-sourced weather service that makes a
global weather map by blending together pictures of the sky taken by devices
running your client app. Integrating photos is only a small part of your
application. You want to take photos with minimal fuss, not reinvent the
camera. Happily, most Android-powered devices already have at least one camera
application installed. In this lesson, you learn how to make it take a picture
for you.</p>


<h2 id="TaskManifest">Request Camera Permission</h2>

<p>If an essential function of your application is taking pictures, then restrict
its visibility on Google Play to devices that have a camera.  To advertise
that your application depends on having a camera, put a <a
href="../../guide/topics/manifest/uses-feature-element.html"> <code>&lt;uses-feature&gt;</code></a> tag in your manifest file:</p>

<pre>
&lt;manifest ... >
    &lt;uses-feature android:name="android.hardware.camera" /&gt;
    ...
&lt;/manifest ... >
</pre>

<p>If your application uses, but does not require a camera in order to function, add <code>android:required="false"</code> to the tag. In doing so, Google Play will allow devices without a
camera to download your application. It's then your responsibility to check for the availability
of the camera at runtime by calling <code><a href="../../reference/android/content/pm/PackageManager.html#hasSystemFeature(java.lang.String)">hasSystemFeature(PackageManager.FEATURE_CAMERA)</a></code>.
If a camera is not available, you should then disable your camera features.</p>


<h2 id="TaskCaptureIntent">Take a Photo with the Camera App</h2> 

<p>The Android way of delegating actions to other applications is to invoke an <code><a href="../../reference/android/content/Intent.html">Intent</a></code> that describes what you want done. This process involves three pieces: The
<code><a href="../../reference/android/content/Intent.html">Intent</a></code> itself, a call to start the external <code><a href="../../reference/android/app/Activity.html">Activity</a></code>,
and some code to handle the image data when focus returns to your activity.</p>

<p>Here's a function that invokes an intent to capture a photo.</p>

<pre>
private void dispatchTakePictureIntent(int actionCode) {
    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(takePictureIntent, actionCode);
}
</pre>


<p>Congratulations: with this code, your application has gained the ability to
make another camera application do its bidding! Of course, if no compatible
application is ready to catch the intent, then your app will fall down like a
botched stage dive. Here is a function to check whether an app can handle your intent:</p>

<pre>
public static boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List&lt;ResolveInfo> list =
            packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
}
</pre>


<h2 id="TaskPhotoView">View the Photo</h2>

<p>If the simple feat of taking a photo is not the culmination of your app's
ambition, then you probably want to get the image back from the camera
application and do something with it.</p>

<p>The Android Camera application encodes the photo in the return <code><a href="../../reference/android/content/Intent.html">Intent</a></code>
delivered to <code><a href="../../reference/android/app/Activity.html#onActivityResult(int, int, android.content.Intent)">onActivityResult()</a></code> as a small <code><a href="../../reference/android/graphics/Bitmap.html">Bitmap</a></code> in the extras, under the key <code>"data"</code>. The following code retrieves
this image and displays it in an <code><a href="../../reference/android/widget/ImageView.html">ImageView</a></code>.</p>

<pre>
private void handleSmallCameraPhoto(Intent intent) {
    Bundle extras = intent.getExtras();
    mImageBitmap = (Bitmap) extras.get("data");
    mImageView.setImageBitmap(mImageBitmap);
}
</pre>

<p class="note"><strong>Note:</strong> This thumbnail image from <code>"data"</code> might be good for an
icon, but not a lot more. Dealing with a full-sized image takes a bit more
work.</p>


<h2 id="TaskPath">Save the Photo</h2> 

<p>The Android Camera application saves a full-size photo if you give it a file to
save into. You must provide a path that includes the storage volume,
folder, and file name.</p>

<p>There is an easy way to get the path for photos, but it works only on Android 2.2 (API level 8)
and later:</p>

<pre> 
storageDir = new File(
    Environment.getExternalStoragePublicDirectory(
        Environment.DIRECTORY_PICTURES
    ), 
    getAlbumName()
);		
</pre> 

<p>For earlier API levels, you have to provide the name of the photo
directory yourself.</p>

<pre> 
storageDir = new File (
    Environment.getExternalStorageDirectory()
        + PICTURES_DIR
        + getAlbumName()
);
</pre> 

<p class="note"><strong>Note:</strong> The path component <code>PICTURES_DIR</code> is
just <code>Pictures/</code>, the standard location for shared photos on the external/shared
storage.</p>


<h3 id="TaskFileName">Set the file name</h3> 

<p>As shown in the previous section, the file location for an image should be
driven by the device environment. What you need to do yourself is choose a
collision-resistant file-naming scheme. You may wish also to save the path in a
member variable for later use. Here's an example solution:</p>

<pre> 
private File createImageFile() throws IOException {
    // Create an image file name
    String timeStamp = 
        new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    String imageFileName = JPEG_FILE_PREFIX + timeStamp + "_";
    File image = File.createTempFile(
        imageFileName, 
        JPEG_FILE_SUFFIX, 
        getAlbumDir()
    );
    mCurrentPhotoPath = image.getAbsolutePath();
    return image;
}
</pre> 


<h3 id="TaskIntentFileName">Append the file name onto the Intent</h3>

<p>Once you have a place to save your image, pass that location to the camera
application via the <code><a href="../../reference/android/content/Intent.html">Intent</a></code>.</p>

<pre>
File f = createImageFile();
takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
</pre>


<h2 id="TaskGallery">Add the Photo to a Gallery</h2>

<p>When you create a photo through an intent, you should know where your image is located, because
you said where to save it in the first place.  For everyone else, perhaps the easiest way to make
your photo accessible is to make it accessible from the system's Media Provider.</p>

<p>The following example method demonstrates how to invoke the system's media scanner to add your
photo to the Media Provider's database, making it available in the Android Gallery application
and to other apps.</p>

<pre>
private void galleryAddPic() {
    Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
    File f = new File(mCurrentPhotoPath);
    Uri contentUri = Uri.fromFile(f);
    mediaScanIntent.setData(contentUri);
    this.sendBroadcast(mediaScanIntent);
}
</pre>


<h2 id="TaskScalePhoto">Decode a Scaled Image</h2>

<p>Managing multiple full-sized images can be tricky with limited memory. If
you find your application running out of memory after displaying just a few
images, you can dramatically reduce the amount of dynamic heap used by
expanding the JPEG into a memory array that's already scaled to match the size
of the destination view. The following example method demonstrates this
technique.</p>

<pre>
private void setPic() {
    // Get the dimensions of the View
    int targetW = mImageView.getWidth();
    int targetH = mImageView.getHeight();
  
    // Get the dimensions of the bitmap
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;
  
    // Determine how much to scale down the image
    int scaleFactor = Math.min(photoW/targetW, photoH/targetH);
  
    // Decode the image file into a Bitmap sized to fill the View
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;
  
    Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    mImageView.setImageBitmap(bitmap);
}
</pre>


    </div>

    
    <div class="training-nav-bottom">
      
      <div class="training-nav-button-next">
        <a href="videobasics.html">
          Next lesson
          <span style="font-size:1.2em">&rsaquo;</span>
          <br/><span class="training-nav-button-title">Recording Videos Simply</span>
        </a>
      </div>
      

      
    </div> <!-- end training-nav -->
    
    
    <a href="#top" style="float:right">&uarr; Go to top</a>
    
      <p><a href="index.html">&larr; Back to Capturing Photos</a></p>
    

  </div> <!-- end jd-content -->

<div id="footer">


  <div id="copyright">
    
  Except as noted, this content is 
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and 
  restrictions, see the <a href="../../license.html">Content 
  License</a>.
  </div>

  <div id="footerlinks">
    
  <p>
    <a href="http://www.google.com/intl/en/policies/" target="_blank">Privacy &amp; Terms</a> -
    <a href="http://www.android.com/branding.html" target="_blank">Brand Guidelines</a> -
    <a
href="http://code.google.com/p/android/issues/entry?template=Developer%20Documentation"
target="_blank">Report Document Issues</a>
  </p>
  </div>

</div> <!-- end footer -->

</div><!-- end doc-content -->

</div> <!-- end body-content --> 

<script type="text/javascript">
init(); /* initialize android-developer-docs.js */
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-5831155-1");
pageTracker._trackPageview();
</script>

</body>
</html>



